<div style="height: 100vh; display: grid; grid-template-rows: min-content auto;">
    <div class="top-actions-container" style="box-shadow: 0px 0px 5px 2px #000000AA;">
        <div style="display: flex">
          <button mat-icon-button (click)="skeletonService.toggleSidebar()" style="margin-top: 5px; margin-right: 15px;">
            <mat-icon>
                menu
            </mat-icon>
          </button>
          <h2 style="margin-top: 10px; margin-bottom: 0px;">Pages</h2>
        </div>
        <div style="display: flex">
          <div style="display: flex;">
            <h3 style="width: max-content; margin-top: 12px; margin-right: 10px; margin-bottom: 0">
                {{page?.name}}
            </h3>
            <button mat-icon-button class="icon-button" matTooltip="Select Page" (click)="toggleSidePanel(SELECT_PAGE)">
                <mat-icon>web</mat-icon>
            </button>
            <button mat-icon-button class="icon-button" matTooltip="Add" (click)="add()" requireRole role="Library.Pages">
              <mat-icon> add </mat-icon>
            </button>
          </div>
        </div>
    </div>
    <div style="display: grid; grid-template-columns: 60px auto;">
        <div class="side-bar">
            <button mat-icon-button matTooltip="Preview" matTooltipPosition="right" (click)="togglePreview()" *ngIf="page">
                <mat-icon *ngIf="preview">visibility</mat-icon>
                <mat-icon *ngIf="!preview">visibility_off</mat-icon>
            </button>
            <button mat-icon-button matTooltip="Layout" matTooltipPosition="right" (click)="toggleSidePanel(LAYOUT)" *ngIf="page">
                <mat-icon>dashboard</mat-icon>
            </button>
            <button mat-icon-button matTooltip="Views" matTooltipPosition="right" (click)="toggleSidePanel(VIEWS)" *ngIf="page">
                <mat-icon>table_chart</mat-icon>
            </button>
            <button mat-icon-button matTooltip="Appearance" matTooltipPosition="right" (click)="toggleSidePanel(APPEARANCE)" *ngIf="page">
                <mat-icon>brush</mat-icon>
            </button>
            <button mat-icon-button matTooltip="Settings" matTooltipPosition="right" (click)="toggleSidePanel(SETTINGS)" *ngIf="page">
                <mat-icon>settings</mat-icon>
            </button>
        </div>
        <div>
            <mat-drawer-container style="height: 100%;">
                <mat-drawer 
                    #sidenav 
                    position="end" 
                    mode='side'
                    [disableClose]="true" 
                    [opened]="this.sidebarOpened.value"
                    class="side-bar active-side-bar"
                    [ngSwitch]="pageMode.value"
                >
                    <h3>{{pageMode.value}}</h3>
                    <app-page-list *ngSwitchCase="SELECT_PAGE" (select)="loadPage($event)" />
                    <app-page-settings *ngSwitchCase="SETTINGS" [page]="page!" />
                </mat-drawer>
                <mat-drawer-content>
                    <app-page-view [page]="page" *ngIf="page" class="inherited-size" />
                    <div style="margin-top: 100px; text-align: center;" *ngIf="!page">
                        No page selected.
                    </div>
                </mat-drawer-content>
            </mat-drawer-container>
        </div>
    </div>
</div>
